<form [formGroup]="form" (ngSubmit)="submit$.next()">
  <div class="row">
    <div class="col h-stretch">
      <div class="input-box">
        <label for="givenName" i18n>First Name</label>
        <input
          enterkeyhint="next"
          id="givenName"
          autocomplete="given-name"
          formControlName="givenName"
          type="text"
        />
      </div>

      <div class="input-box">
        <label for="familyName" i18n>Last Name</label>
        <input
          enterkeyhint="next"
          id="familyName"
          autocomplete="family-name"
          formControlName="familyName"
          type="text"
        />
      </div>

      <div class="input-box">
        <label for="email" i18n>E-Mail</label>
        <input
          enterkeyhint="next"
          id="email"
          autocomplete="email"
          formControlName="email"
          type="email"
        />
      </div>
    </div>

    <div class="col h-stretch message input-box">
      <label for="message" i18n>Message</label>
      <textarea
        #message
        enterkeyhint="enter"
        maxlength="10000"
        rows="30"
        id="message"
        autocomplete="off"
        formControlName="message"
        type="text"
      ></textarea>
      <small class="ml-auto">
        {{ message.value.length | number }} / {{ 10000 | number }}
      </small>
    </div>
  </div>

  @switch (formState().state) {
    @case ("success") {
      <p class="color-primary mt2" [innerHTML]="formState().message"></p>
    }
    @case ("error") {
      <p class="danger mt2" [innerHTML]="formState().message"></p>
    }
    @case ("loading") {
      <af-progress-spinner size="100" />
    }
  }

  @if (formState().canSend) {
    <button
      [disabled]="this.form.disabled"
      class="btn primary"
      type="submit"
      i18n
    >
      Submit
    </button>
  }
</form>
